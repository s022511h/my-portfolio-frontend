"use strict";(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[831],{6831:function(s,a,e){e.r(a),e.d(a,{default:function(){return hs}});e(2953);var t=e(6768),n=e(4232),i=e(5130);const l=s=>((0,t.Qi)("data-v-e49b2542"),s=s(),(0,t.jt)(),s),o={class:"admin-container"},r=l(()=>(0,t.Lk)("div",{class:"admin-header"},[(0,t.Lk)("h1",null,"Admin Dashboard"),(0,t.Lk)("p",null,"Manage users, campaigns, and email communications")],-1)),c={class:"admin-content"},d={class:"stats-section"},u=l(()=>(0,t.Lk)("h2",null,"Overview",-1)),m={class:"stats-grid"},p={class:"stat-card"},g={class:"stat-number"},k=l(()=>(0,t.Lk)("div",{class:"stat-label"},"Total Users",-1)),L={class:"stat-card"},v={class:"stat-number"},h=l(()=>(0,t.Lk)("div",{class:"stat-label"},"Marketing Subscribers",-1)),C={class:"stat-card"},b={class:"stat-number"},f=l(()=>(0,t.Lk)("div",{class:"stat-label"},"Emails Sent",-1)),E={class:"stat-card"},_={class:"stat-number"},y=l(()=>(0,t.Lk)("div",{class:"stat-label"},"Suppressed Emails",-1)),U={class:"stat-card"},A={class:"stat-number"},w=l(()=>(0,t.Lk)("div",{class:"stat-label"},"Site Audits",-1)),S={class:"stat-card"},R={class:"stat-number"},j=l(()=>(0,t.Lk)("div",{class:"stat-label"},"Audit Captures",-1)),T={class:"campaign-section"},V=l(()=>(0,t.Lk)("h2",null,"Send Marketing Campaign",-1)),P={class:"campaign-form"},N={class:"form-group"},X=l(()=>(0,t.Lk)("label",{for:"subject"},"Email Subject",-1)),D={class:"form-group"},$=l(()=>(0,t.Lk)("label",{for:"template"},"Template",-1)),B=l(()=>(0,t.Lk)("option",{value:"newsletter"},"Newsletter",-1)),I=l(()=>(0,t.Lk)("option",{value:"product_update"},"Product Update",-1)),O=[B,I],M={class:"form-group"},z=l(()=>(0,t.Lk)("label",{for:"content"},"Email Content",-1)),J={class:"form-group"},x=l(()=>(0,t.Lk)("label",{for:"recipients"},"Recipients",-1)),F=l(()=>(0,t.Lk)("option",{value:"all"},"All Marketing Subscribers",-1)),K=[F],Q=["disabled"],Y={key:0},q={key:1},G={class:"logs-section"},H=l(()=>(0,t.Lk)("h2",null,"Recent Email Activity",-1)),W={class:"logs-container"},Z={class:"logs-header"},ss={key:0,class:"loading"},as={key:1,class:"no-logs"},es={key:2,class:"logs-table"},ts=l(()=>(0,t.Lk)("div",{class:"log-item log-header"},[(0,t.Lk)("span",null,"Email"),(0,t.Lk)("span",null,"Type"),(0,t.Lk)("span",null,"Template"),(0,t.Lk)("span",null,"Subject"),(0,t.Lk)("span",null,"Sent At")],-1)),ns={class:"log-email"},is={class:"log-subject"},ls={class:"users-section"},os=l(()=>(0,t.Lk)("h2",null,"User Management",-1)),rs={class:"users-container"},cs={key:0,class:"loading"},ds={key:1,class:"no-users"},us={key:2,class:"users-table"},ms=l(()=>(0,t.Lk)("div",{class:"user-item user-header"},[(0,t.Lk)("span",null,"Name"),(0,t.Lk)("span",null,"Email"),(0,t.Lk)("span",null,"Marketing Consent"),(0,t.Lk)("span",null,"Email Verified"),(0,t.Lk)("span",null,"Joined")],-1));function ps(s,a,e,l,B,I){return(0,t.uX)(),(0,t.CE)("div",o,[r,(0,t.Lk)("div",c,[(0,t.Lk)("div",d,[u,(0,t.Lk)("div",m,[(0,t.Lk)("div",p,[(0,t.Lk)("div",g,(0,n.v_)(B.stats.totalUsers),1),k]),(0,t.Lk)("div",L,[(0,t.Lk)("div",v,(0,n.v_)(B.stats.marketingConsent),1),h]),(0,t.Lk)("div",C,[(0,t.Lk)("div",b,(0,n.v_)(B.stats.emailsSent),1),f]),(0,t.Lk)("div",E,[(0,t.Lk)("div",_,(0,n.v_)(B.stats.suppressedEmails),1),y]),(0,t.Lk)("div",U,[(0,t.Lk)("div",A,(0,n.v_)(B.stats.totalAudits),1),w]),(0,t.Lk)("div",S,[(0,t.Lk)("div",R,(0,n.v_)(B.stats.auditCaptures),1),j])])]),(0,t.Lk)("div",T,[V,(0,t.Lk)("div",P,[(0,t.Lk)("div",N,[X,(0,t.bo)((0,t.Lk)("input",{id:"subject","onUpdate:modelValue":a[0]||(a[0]=s=>B.campaign.subject=s),type:"text",placeholder:"Enter email subject",class:"form-input"},null,512),[[i.Jo,B.campaign.subject]])]),(0,t.Lk)("div",D,[$,(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>B.campaign.template=s),class:"form-select"},O,512),[[i.u1,B.campaign.template]])]),(0,t.Lk)("div",M,[z,(0,t.bo)((0,t.Lk)("textarea",{id:"content","onUpdate:modelValue":a[2]||(a[2]=s=>B.campaign.content=s),placeholder:"Enter email content...",class:"form-textarea",rows:"6"},null,512),[[i.Jo,B.campaign.content]])]),(0,t.Lk)("div",J,[x,(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=s=>B.campaign.recipientType=s),class:"form-select"},K,512),[[i.u1,B.campaign.recipientType]])]),(0,t.Lk)("button",{onClick:a[4]||(a[4]=(...s)=>I.sendCampaign&&I.sendCampaign(...s)),disabled:B.sending||!B.campaign.subject||!B.campaign.content,class:"send-btn"},[B.sending?((0,t.uX)(),(0,t.CE)("span",q,"Sending...")):((0,t.uX)(),(0,t.CE)("span",Y,"Send Campaign"))],8,Q),B.campaignResult?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,n.C4)(B.campaignResultClass)},(0,n.v_)(B.campaignResult),3)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",G,[H,(0,t.Lk)("div",W,[(0,t.Lk)("div",Z,[(0,t.Lk)("button",{onClick:a[5]||(a[5]=(...s)=>I.loadEmailLogs&&I.loadEmailLogs(...s)),class:"refresh-btn"},"Refresh Logs")]),B.loadingLogs?((0,t.uX)(),(0,t.CE)("div",ss,"Loading email logs...")):0===B.emailLogs.length?((0,t.uX)(),(0,t.CE)("div",as," No email logs found ")):((0,t.uX)(),(0,t.CE)("div",es,[ts,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(B.emailLogs,s=>((0,t.uX)(),(0,t.CE)("div",{key:s.id,class:"log-item"},[(0,t.Lk)("span",ns,(0,n.v_)(s.email),1),(0,t.Lk)("span",{class:(0,n.C4)(I.getTypeClass(s.type))},(0,n.v_)(s.type),3),(0,t.Lk)("span",null,(0,n.v_)(s.template||"-"),1),(0,t.Lk)("span",is,(0,n.v_)(s.subject),1),(0,t.Lk)("span",null,(0,n.v_)(I.formatDate(s.sent_at)),1)]))),128))]))])]),(0,t.Lk)("div",ls,[os,(0,t.Lk)("div",rs,[(0,t.Lk)("button",{onClick:a[6]||(a[6]=(...s)=>I.loadUsers&&I.loadUsers(...s)),class:"refresh-btn"},"Load Users"),B.loadingUsers?((0,t.uX)(),(0,t.CE)("div",cs,"Loading users...")):0===B.users.length?((0,t.uX)(),(0,t.CE)("div",ds," No users found ")):((0,t.uX)(),(0,t.CE)("div",us,[ms,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(B.users,s=>((0,t.uX)(),(0,t.CE)("div",{key:s.id,class:"user-item"},[(0,t.Lk)("span",null,(0,n.v_)(s.first_name)+" "+(0,n.v_)(s.last_name),1),(0,t.Lk)("span",null,(0,n.v_)(s.email),1),(0,t.Lk)("span",{class:(0,n.C4)(I.getConsentClass(s.marketing_consent))},(0,n.v_)(s.marketing_consent?"Yes":"No"),3),(0,t.Lk)("span",{class:(0,n.C4)(I.getVerifiedClass(s.email_verified))},(0,n.v_)(s.email_verified?"Verified":"Pending"),3),(0,t.Lk)("span",null,(0,n.v_)(I.formatDate(s.created_at)),1)]))),128))]))])])])])}e(4114),e(3110);var gs=e(6436),ks={name:"AdminDashboard",data(){return{authStore:gs.m,stats:{totalUsers:0,marketingConsent:0,emailsSent:0,suppressedEmails:0,totalAudits:0,auditCaptures:0},campaign:{subject:"",template:"newsletter",content:"",recipientType:"all"},sending:!1,campaignResult:"",campaignResultClass:"",emailLogs:[],loadingLogs:!1,users:[],loadingUsers:!1}},async mounted(){var s;gs.m.isAuthenticated&&1===(null===(s=gs.m.user)||void 0===s?void 0:s.id)?(await this.loadStats(),await this.loadEmailLogs()):this.$router.push("/profile")},methods:{async loadStats(){try{const s=await gs.m.getCurrentToken(),a=await fetch(`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL}/admin/stats`,{headers:{Authorization:`Bearer ${s}`}});if(a.ok){const s=await a.json();this.stats=s.stats}}catch(s){console.error("Error loading stats:",s)}},async sendCampaign(){this.sending=!0,this.campaignResult="";try{const s=await gs.m.getCurrentToken(),a=await fetch(`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL}/emails/marketing/send`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(this.campaign)}),e=await a.json();e.success?(this.campaignResult=`Campaign sent successfully! ${e.sent} emails sent, ${e.failed} failed.`,this.campaignResultClass="success-message",this.campaign={subject:"",template:"newsletter",content:"",recipientType:"all"},await this.loadEmailLogs(),await this.loadStats()):(this.campaignResult=e.error||"Failed to send campaign",this.campaignResultClass="error-message")}catch(s){console.error("Error sending campaign:",s),this.campaignResult="Error sending campaign",this.campaignResultClass="error-message"}finally{this.sending=!1}},async loadEmailLogs(){this.loadingLogs=!0;try{const s=await gs.m.getCurrentToken(),a=await fetch(`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL}/emails/log`,{headers:{Authorization:`Bearer ${s}`}});if(a.ok){const s=await a.json();this.emailLogs=s.logs||[]}}catch(s){console.error("Error loading email logs:",s)}finally{this.loadingLogs=!1}},async loadUsers(){this.loadingUsers=!0;try{const s=await gs.m.getCurrentToken(),a=await fetch(`${{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL}/admin/users`,{headers:{Authorization:`Bearer ${s}`}});if(a.ok){const s=await a.json();this.users=s.users||[]}}catch(s){console.error("Error loading users:",s)}finally{this.loadingUsers=!1}},formatDate(s){return s?new Date(s).toLocaleDateString()+" "+new Date(s).toLocaleTimeString():"-"},getTypeClass(s){return{"type-transactional":"transactional"===s,"type-marketing":"marketing"===s}},getConsentClass(s){return{"consent-yes":s,"consent-no":!s}},getVerifiedClass(s){return{"verified-yes":s,"verified-no":!s}}}},Ls=e(1241);const vs=(0,Ls.A)(ks,[["render",ps],["__scopeId","data-v-e49b2542"]]);var hs=vs}}]);
//# sourceMappingURL=831.0822f275.js.map